# cjdns

[![Build Status](https://travis-ci.org/cjdelisle/cjdns.png?branch=master)](https://travis-ci.org/cjdelisle/cjdns)

Безопасная, зашифрованная сеть для обычных людей.

Cjdns - это зашифрованная IPv6 сеть в которой используются публичные ключи шифрования для присвоения публичного адреса и распределенной таблицы маршрутизации (DHT). Это позволяет создавать сети с очень простой настройкой, которые будут защищены от потенциальных проблем текущих, обычных IPv4 и IPv6 сетей.


## Зачем?

Для того, что бы дать обычным людям больше возможностей при обмене информацией.

Cjdns позволяет решить множество проблем текущих сетей, при его использовании - вы полностью обладаете своей инфраструктурой обмена информацией. 

Кроме того, данный протокол позволяет решить проблему оптимального пере-распределения трафика не делая практически ничего.

Пример - Сколько у вас дома есть открытых Wi-Fi сетей?
Наверно больше 2, а теперь представим, что они работают в Mesh режиме, динамически перенаправляя нагрузку и распределяя трафик.

Централизация власти проявляется в закрытии таких сайтов как Wikileaks, и любых других - неугодных власти.

В цивилизованном, демократическом обществе каждый должен иметь свободу слова, а цензурироватся могут лишь такие очевидно-плохие вещи как: Детская порнография, мошенничество, спам.
И конечно, решения о цензуре - должно принимать общество, а не Правительство.


## Как мы близки к финальной версии?

В данный момент, работает тестовая сеть в которой имеется от 500 до 1000 узлов.

Cjdns было протестировано на  x86, amd64, ARMv5, ARMv7, MIPS, PowerPC32 и PowerPC64. 
Тестирование на различных Linux системах продолжается. 

Програмное обеспечение работает стабильно, но мы не знает как поведут себя в реальном мире наши алгоритмы и протоколы.  
Пожалуйста обновляйтесь на последнюю версию cjdns, таким образом, с помощью тестирования, мы сможем определить оптимальный набор алгоритмов и протоколов для использования в реальном мире.


## Ты можешь помочь!

Нам нужны добровольцы для тестирования по автоматической сборке cjdns на Apple OS X системе, если вы можете пожертвовать нам деньги для этого дела - напишите нам на почту. 
Или же вы можете помочь нам, предоставив 24/7 shell доступ к компьютеру с системой OS X для проведения тестирования.
Всё это можно обсудить в нашем IRC канале.


## Анонимность

В отличии от TOR, I2P, и Freenet’a, cjdns планировалась не как анонимная есть. Она не использует случайную маршрутизацию, динамические маршруты и другие технологии для обеспечения анонимности. 

Наоборот, cjdns использует самый оптимальный маршрут, мы пошли на такой шаг, для обеспечения максимальной производительности.

С другой стороны, некий уровень анонимности всё же присутствует, для того что бы определить ваше физическое положение на основе вашего cjdns адреса, потребуется сделать трассировку по IPv4 адресам от конечной ноды, до вас, запросив информацию по проходящему трафику от операторов всех транзитных нод.


## Безопасность

Когда вы получаете информационный пакет из интернета, это означает, что он предназначен для вас, но никто не знает, модифицировался ли пакет по пути или же нет. 
Множество программ которые взаимодействуют с интернетом, не проверяют неизменность пакета, а такие програмно-аппаратные средства как DPI, могут вносить значительные изменения в пакеты.
Cjdns гарантирует, что пакет по пути был не кем не модифицирован, что подтверждается криптографическими средствами, которые используются в этом протоколе.

Cjdns защищает информацию которая поступает к вам, от использования заведомо ложного маршрута, что позволяет полностью избежать атаки man-in-the-middle.


## Простота

Представьте себе такую компьютерную сеть, в которой все что нужно сделать инженеру - это подключить компьютер сетевым кабелем, компьютер сам узнает как найти других и сам сконфигурируется. 
Это и есть основная цель cjdns. Конечо же, сетевые специалисты всё еще будут нужны, для решения сложных технических вопросов, но бОльшую часть решения проблем сможет взять на себя cjdns.

## Масштабируемость

С основе Cjdns лежат принципы одноранговой сети, таким образом, cjdns может масштабироваться бесконечно - нет большой нагрузки на какой-то определенный узел.
Cjdns использует распределенную хэш таблицу (DHT) для обмена маршрутами, это позволяет не иметь карту всей сети каждому узлу (не раздувать таблицу маршрутов).

## Testimonials

    23:26 <@jercos> well, cjdns is now officially more reliable than the open internet for getting to my cheaper VPSes :|


## Как работает роутинг?

Для того, что бы понять как работает маршрутизация в cjdns, очень важно понимать, как она работает в существующем интернете.
На каждой развилке, маршрутизатор читает адрес назначения в пакете и решает куда его направить.

В cjdns сети, пакет который идет на локальный (програмный) маршрутизатор, помечается, добавляя в него наилучший маршрут для пакета. Лучший маршрут - это самый ближний физически к вам роутер, имеющий адрес близкий по значнию с адресом назначения.
Следующий роутер в цепочке так же читает данное поле и отправляет пакет в нужном направлении, кроме того, роутеры постоянно взаимодействуют друг с другом, обмениваясь информацией по маршрутам с помощью Kademlia DHT design.


## А что насчет DNS?
DNS - это сложная система, которую трудно реализовать без участия какого-либо центрального сервера. 
Cjdns сообщество еще не решило какой вектор развития пример разработка DNS в этой сети, если у вас есть идеи - обсудите их с нами в IRC.


## Почему проект называется cjdns?

Cjdns  - это совмещение двух слов cjd и DNS, но проект поменял направление своего развития практически в начале, 
и у него всё еще нет замены DNS, но имя осталось. Если вы хотите - можете придумать своб расшифровку названия


## Что еще почитать

Пожалуйста прочтите [the Whitepaper](rfcs/Whitepaper.md)

Если вам всё еще интересен проект - присоединяйтесь к обсуждению в IRC:

  * irc://irc.EFNet.org/#cjdns
  * http://chat.efnet.org:9090/?channels=%23cjdns&Login=Login

Спасибо за ваше время и интерес,
Caleb James DeLisle  ==  cjdelisle  ==  cjd

--------------------------------------------------------------------------------


# Как установить cjdns

Эти инструкции предназначены для Debian дистрибутива и аналогичных (Ubuntu) 

## 0. Устанавливаем утилиты компиляции.

    sudo apt-get install cmake git build-essential

Установка cmake желательна, но не обязательна. Если cmake не найден в процессе установки или его версия слишком старая - он будет загружен автоматически при установке.

## 1. Скачиваем cjdns из GitHub.

Клонируйте репозиторий из GitHub:

    git clone https://github.com/cjdelisle/cjdns.git cjdns
    cd cjdns

## 2. Компилируем.

    ./do

Подождите надписи `Build completed successfully, type ./cjdroute to begin setup.`, как только она появится - действуйте дальше:

--------------------------------------------------------------------------------


# Установка

Запустите cjdroute без параметров для отображения информации и доступных опций:

    ./cjdroute

## 0: Проверьте что у вас все установлено корректно.

    cat /dev/net/tun

Если ответ: `cat: /dev/net/tun: File descriptor in bad state` Отлично!

Если ответ: `cat: /dev/net/tun: No such file or directory`

Создайте его:

    sudo mkdir /dev/net ; sudo mknod /dev/net/tun c 10 200 && sudo chmod 0666 /dev/net/tun

Затем `cat /dev/net/tun` снова.

Если ответ: `cat: /dev/net/tun: Permission denied` Вы скорее всего используете виртуальный сервер (VPS) на основе технологии виртуализации OpenVZ. Попросите своего провайдера услуг включить TUN/TAP устройство, это стандартный протокол, ваш провайдер должен быть в курсе.


## 1: Генерируем новый файл с настройками.

    ./cjdroute --genconf >> cjdroute.conf

## 2: Найдите друга.

Для доступа в сеть, вам потребуется человек который уже в сети.

Найти людей которые готовы подключить вам вы можете найти в IRC канале, либо вы можете использовать данные тестового пира http://hype.rusblock.com/Public_peers.html

  * irc://irc.EFNet.org/#cjdns
  * http://chat.efnet.org:9090/?channels=%23cjdns&Login=Login


## 3: Заполните информацию о найденом друге.

В файле cjdroute.conf, вы увидите:

            // Nodes to connect to.
            "connectTo":
            {
                // Add connection credentials here to join the network
                // Ask somebody who is already connected.
            }

После добавления данных друга он будет выглядеть так:

            // Nodes to connect to.
            "connectTo":
            {
                "0.1.2.3:45678":
                {
                    "password": "thisIsNotARealConnection",
                    "publicKey": "thisIsJustForAnExampleDoNotUseThisInYourConfFile.k"
                }
            }

Вы можете добавлять столько данных для подключения к друзьям, сколько захотите.

Ваши собственные данные для подключения к ВАМ находятся в секции "authorizedPasswords" в JSON формате. Не редактируйте их - дайте их тем кто хочет к вам подключится.

Выглядит это так:

        /* These are your connection credentials
           for people connecting to you with your default password.
           adding more passwords for different users is advisable
           so that leaks can be isolated.

            "your.external.ip.goes.here:12345":
            {
                "password": "thisIsNotARealConnectionEither",
                "publicKey": "thisIsAlsoJustForAnExampleDoNotUseThisInYourConfFile.k"
            }
        */

`your.external.ip.goes.here` это поле вы должны заменить на ваш IPv4 адрес которые люди будут использовать для подключения к вам, через старый интернет.

Страница [rfcs/configure.md](rfcs/configure.md) содержит больше информации о подключении и настройке.

## 4: Безопасность - Проверьте открытые порты.

Как только вы подключились к глобальной сети cjdns - вы стали обладателем публичного IPv6 адреса, проверьте что ваши сервисы, не доступны из внешней сети.

Подробнее [doc/network-services.md](doc/network-services.md)


## 5: Запускаем!

    sudo ./cjdroute < cjdroute.conf

Если вы хотите записывать логи в файл, то:

    sudo ./cjdroute < cjdroute.conf > cjdroute.log

Остановка cjdns осуществляется следующим образом:

    sudo killall cjdroute
 
Если вы испытваете проблемы при использовании `killall cjdroute`. Используйте `pgrep cjdroute` или `top` для определения, запущен ли он.

## 6: Войдите в IRC

Добро пожаловать в сеть, в которой вы настоящий системный администратор.
По любым вопросам вы можете проконсультироватся в IRC, на сервере irc.efnet.org канал - #cjdns

## Заметки

Нормальная установка cjdns подразумивает запуск от имени администратора, если вы не считаете нужным давать такие привелегии cjdns, то вы можете воспользоватся инструкцией ниже, запустив его не от root.

Защищайте файл настроек, именно он ваша безопасность в сети, ваш идентификатор. Если у вас его уркадут то ваша безопасность будет скомпроментирована, злоумышленник сможет представится вами в сети.

    chmod 400 cjdroute.conf
    mkdir /etc/cjdns && cp ./cjdroute.conf /etc/cjdns/

# Получаем доступ к интерфейсу администратора в cjdns

Когда cjdroute запущен и работает, интерфейс администратора доступ по адресу localhost:11234 (Обратите внимание, что это не веб интерйес, веб интерфейс вы можете получить используя nodejs cjdns admin)
(Настройки порта и пароля для доступа к интерфейсу администратора доступны в файле cjdroute.conf).

Каким образом получить доступ к данному интерйесу вы можете прочитать по этим ссылкам: [admin/README.md](admin/README.md).


Библиотека для python 
--------------

cjdns поставляется с библиотекой для python которая позволяет получить доступ к admin API. Больше информации вы можете получить здесь [readme](contrib/python/README.md).


Библиотека для perl
------------

Библиотека для perl подерживается разработчиком Mikey. Инструкции по использованию можно получить тут [readme](contrib/perl/CJDNS/README).


# Продвинутая настройка

* [Запуск cjdns не от root](doc/non-root-user.md)
* [Настройка ПК как cjdns NAT gateway для вашей домашней сети](doc/nat-gateway.md)
* [Установка cjdns на OpenIndiana](doc/open-indiana.md)


[beyond pain]: https://lists.torproject.org/pipermail/tor-dev/2012-October/004063.html
