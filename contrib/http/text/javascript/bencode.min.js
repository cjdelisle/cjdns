function bencode(r){switch(btypeof(r)){case"string":return bstring(r);case"number":return bint(r);case"list":return blist(r);case"dictionary":return bdict(r);default:return null}}function bdecode(r){var t=bparse(r);return null!=t&&""==t[1]?t[0]:null}function bparse(r){switch(r.charAt(0)){case"d":return bparseDict(r.substr(1));case"l":return bparseList(r.substr(1));case"i":return bparseInt(r.substr(1));default:return bparseString(r)}}function bparseString(r){return str2=r.split(":",1)[0],isNum(str2)?(len=parseInt(str2),[r.substr(str2.length+1,len),r.substr(str2.length+1+len)]):null}function bparseInt(r){var t=r.split("e",1)[0];return isNum(t)?[t,r.substr(t.length+1)]:null}function bparseList(r){for(var t,n=[];"e"!=r.charAt(0)&&r.length>0;){if(t=bparse(r),null==t)return null;n.push(t[0]),r=t[1]}return r.length<=0?null:[n,r.substr(1)]}function bparseDict(r){for(var t,n,e={};"e"!=r.charAt(0)&&r.length>0;){if(t=bparseString(r),null==t)return;if(n=bparse(t[1]),null==n)return null;e[t[0]]=n[0],r=n[1]}return r.length<=0?null:[e,r.substr(1)]}function isNum(r){var t,n;for(r=r.toString(),t="-"==r.charAt(0)?1:0;t<r.length;t++)if(n=r.charCodeAt(t),48>n||n>57)return!1;return!0}function btypeof(r){var t=typeof r;return"object"==t?"undefined"==typeof r.length?"dictionary":"list":t}function bstring(r){return r.length+":"+r}function bint(r){return"i"+r+"e"}function blist(r){var t,n;n=[];for(key in r)n.push(bencode(r[key]));n.sort(),t="l";for(key in n)t+=n[key];return t+"e"}function bdict(r){var t,n;n=[];for(key in r)n.push(bstring(key)+bencode(r[key]));n.sort(),t="d";for(key in n)t+=n[key];return t+"e"}self.addEventListener("message",function(r){self.postMessage(bdecode(r.data))},!1);
